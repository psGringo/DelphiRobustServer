unit uClientRequestExamples;

interface

type
  TClientRequestExamples = class
    procedure POST;
  end;

implementation

uses
  uSmartPointer, IdHTTP, System.Classes, IdMultipartFormData, superobject,uMain;

{ TClientRequestExamples }

procedure TClientRequestExamples.POST;
var
  client: ISmartPointer<TIdHTTP>;
  s : string;
  postData : ISmartPointer<TIdMultiPartFormDataStream>;
  fileName: string;
  jo:ISuperobject;
  ss: ISmartPointer<TStringStream>;

  r: string;
begin
    jo := SO;
    jo.S['param1'] := '1234';
    jo.S['param2'] := '12345';
  client := TSmartPointer<TIdHTTP>.Create();
  ss := TSmartPointer<TStringStream>.Create();
  s := jo.AsJSon(false, false);
  ss.Write(Pointer(s)^, length(s));
  client.Request.ContentType := 'application/json';
  client.Request.ContentEncoding := 'utf-8';
  r := client.Post('http://localhost:' + '7777' + '/' + Main.eRequest.Text, ss); //
end;

end.

